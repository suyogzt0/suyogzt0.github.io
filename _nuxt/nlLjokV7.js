import{f as e,lV as a,ak as s,aD as r,v as t,U as d,lW as o,V as n,T as l,I as i,r as c,n as p,lX as u,b4 as m,g as f,lY as y,c as k,o as h,B as g,i as v,F as x,K as S,lZ as A,C as B,J as C,ae as _,a3 as b,_ as E}from"./BMSK5C5y.js";import{u as R}from"./DI67NjSx.js";const w=E(e({__name:"remark",props:{remark:{type:String,default:""},address:{type:String,default:""},chain:{type:String,default:""},priority:{type:Number,default:0},teleported:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},formatAddress:{type:Function,default:e=>"*"+(null==e?void 0:e.slice(-6))},mouseoverAddress:{type:Function,default:null},addressClass:{type:String,default:""},addressStyle:{type:String,default:""},iconEditColor:{type:String,default:"var(--third-text)"},showAddressTitle:{type:Boolean,default:!1},iconEditSize:{type:String,default:"12px"},iconSize:{type:String,default:"16px"},showAddress:{type:Boolean,default:!0},maxRemarkLength:{type:Number,default:14},wallet_logo:{type:Object,default:()=>({logo:"",name:"",url:"",vip_logo:""})},canEdit:{type:Boolean,default:!0},avatarClass:{type:String,default:"mr-10px"}},emits:["refresh"],setup(e,{emit:E}){a((a=>({e71d04d8:e.iconEditColor,"6a7ef0a0":e.iconEditSize})));const w=e,I=E,{updateNum3:z}=s(r()),{t:j}=t(),F=d(),N=o(),L=n(),P=l("target"),T=i(!1),V=c(!1);let D;function J(e){const a=e.remark;a.length<=20?function(e){const a={address:w.address,name:e,chain:w.chain};V.value=!0,R(a).then((()=>{b.success(j("success")),z.value++,I("refresh")})).catch((e=>{b.error(e.message)})).finally((()=>{V.value=!1}))}(a):b.error(j("maximum10characters"))}return p((()=>{if(P.value){const e=u(P,(([e])=>{T.value=e.isIntersecting}));D=e.stop}})),m((()=>{D&&D()})),f((()=>{const e=N.getRemarkByAddress({address:w.address,chain:w.chain}),a=w.remark;return e||a})),f((()=>{const e=N.getRemarkByAddress({address:w.address,chain:w.chain}),a=w.remark,s=1===w.priority?a||e:e||a;return y(s,w.maxRemarkLength)||w.formatAddress(w.address)})),f((()=>{const e=N.getRemarkByAddress({address:w.address,chain:w.chain}),a=w.remark;return(1===w.priority?a||e:e||a)||w.address})),(a,s)=>{var r,t,d;const o=B;return h(),k("div",{ref_key:"target",ref:P,class:"remark-com"},[e.canEdit&&v(T)?(h(),k(x,{key:0},[(null==(t=null==(r=v(F))?void 0:r.userInfo)?void 0:t.evmAddress)||(null==(d=v(L))?void 0:d.address)?(h(),S(A,{key:0,address:e.address,chain:e.chain,remark:e.remark,popoverProps:{width:320,title:v(j)("editRemark"),popperClass:"[&&]:[--el-popover-title-text-color:--main-text] [&&]:[--el-popover-title-font-size:14px]"},onConfirm:J},null,8,["address","chain","remark","popoverProps"])):(h(),S(o,{key:1,name:"custom:remark",class:"text-12px ml-5px clickable icon-remark shrink-0",onClick:C(v(_),["stop","prevent"])},null,8,["onClick"]))],64)):g("",!0)],512)}}}),[["__scopeId","data-v-a07ba607"]]);export{w as default};
