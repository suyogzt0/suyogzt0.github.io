import{f as e,v as a,ak as l,y as t,z as s,U as n,I as o,x as i,r,g as c,dN as u,m as d,n as p,a3 as m,N as v,c as x,o as f,a as b,b as h,B as y,K as g,t as k,i as w,w as C,C as j,J as I,H as $,d as B,F as _,D as T,O as S,G as D,s as N,E as U,aW as z,dp as A,dq as M}from"./BMSK5C5y.js";import W from"./6eADKXIc.js";import R from"./DojSXHdl.js";import V from"./DzWoTwlL.js";import{_ as q,a as H,b as E}from"./DI67NjSx.js";import{s as F}from"./DSXY0Md2.js";import"./B3rSGlmP.js";import"./ByCXp7NP.js";import"./Deprqz-m.js";import"./CujBmTjQ.js";import"./nlLjokV7.js";const G={class:"bg-[--secondary-bg] flex-1 w-100% px-200px pt-40px overflow-y-auto bot-manage",style:{height:"calc(100vh - 150px)"}},J={class:"mb-8px flex-between items-center"},K={class:"text-16px font-500"},L={key:0},O={class:"flex-between"},P={class:"text-24px"},Q={key:0,class:"mask text-center color-[--main-text] absolute bg-[--border] top-0 right-0 left-0 bottom-0 flex items-center justify-center z-1 text-14px cursor-pointer"},X={class:"grid grid-cols-3 gap-2 mt-30px"},Y={class:"color-[--third-text] rounded-4px text-10px px-4px py-1px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-15px absolute left-2px top-2px"},Z={class:"text-center mt-30px flex-between"},ee=e({__name:"index",setup(e,{expose:ee}){ee({getMultiWalletsAllChain:Ie});const{t:ae}=a(),{showImport:le,mode:te,showBotRecord:se}=l(t()),{theme:ne,isDark:oe}=l(s()),ie=n(),re=o(!1),ce=o(!1),ue=o(!0),de=i("encryptedMnemonic","",sessionStorage),pe=o(!1),me=r([]),ve=r([]),xe=o(!1),fe=o(!1),be=r(0),he=r(!1);let ye=null;const ge=c((()=>{var e;const a=de.value||"",l=(null==(e=null==ie?void 0:ie.userInfo)?void 0:e.tgUid)||"";if(a&&l){return u(a,l).split(" ")||[]}return[]})),ke=c((()=>(null==ie?void 0:ie.evmAddress)||""));function we(){he.value||(Ie(),Ce(10))}d((()=>ke.value),(e=>{e?Ie():(me.value=[],ve.value=[])})),p((()=>{Ie(),ye&&clearInterval(ye)}));const Ce=e=>{be.value=e,he.value=!0,ye=F((()=>{be.value--,be.value<=0&&(clearInterval(ye),ye=null,he.value=!1)}),1e3)};function je(){xe.value=!0,H().then((e=>{ve.value=e,se.value=!0})).catch((e=>{m.error(e)})).finally((()=>{xe.value=!1}))}function Ie(){return new Promise(((e,a)=>{pe.value=!0;const l=ie.isSupportChains;q(null==l?void 0:l.join(",")).then((a=>{me.value=Array.isArray(a)?null==a?void 0:a.map(((e,a)=>{var l,t,s,n,o,i,r,c;return{id:`parent-${a}`,tgUid:e.tgUid,address:e.tgUid,name:e.name,source:e.source,operate:"delete",genSource:e.genSource,evmAddress:(null==(s=null==(t=null==(l=e.balancesInfo)?void 0:l.filter((e=>"bsc"==e.chain)))?void 0:t[0])?void 0:s.address)||"",balance:null==(n=null==e?void 0:e.balancesInfo)?void 0:n.reduce(((e,a)=>e+Number(a.balance)),0),mainTokenBalance:null==(o=null==e?void 0:e.balancesInfo)?void 0:o.reduce(((e,a)=>e+Number(a.mainTokenBalance)),0),usdcTokenBalance:null==(i=null==e?void 0:e.balancesInfo)?void 0:i.reduce(((e,a)=>e+Number(a.usdcTokenBalance)),0),usdtTokenBalance:null==(r=null==e?void 0:e.balancesInfo)?void 0:r.reduce(((e,a)=>e+Number(a.usdtTokenBalance)),0),balancesInfo:null==(c=e.balancesInfo)?void 0:c.map(((e,l)=>({...e,id:`child-${a}-${l}`,name:e.address,operate:"deposit",isChildren:!0})))}})):[],e(me.value)})).catch((e=>{m.error(e),a([])})).finally((()=>{pe.value=!1,fe.value=!1}))}))}function $e(){re.value=!0,E().then((e=>{de.value=null==e?void 0:e.Mnemonic,m.success(ae("success")),ue.value=!0,ce.value=!0,Be()})).catch((e=>{m.error(String(e))})).finally((()=>{re.value=!1}))}function Be(){Ie()}const _e=()=>{z.confirm(ae("lastChance"),ae("tips"),{type:"warning",icon:A(M),confirmButtonText:ae("saved"),cancelButtonText:ae("cancel"),customClass:`${te.value} delete_confirm`}).then((()=>{de.value="",ce.value=!1})).catch((e=>{}))};return(e,a)=>{const l=j,t=$,s=U,n=v("copy");return f(),x("div",G,[b("div",J,[b("span",K,k(e.$t("walletList")),1),w(ke)?(f(),x("span",{key:0,class:"text-16px font-500 color-[--third-text] ml-40px cursor-pointer",onClick:je},k(e.$t("operateHistory")),1)):y("",!0),a[5]||(a[5]=b("div",{class:"flex-1"},null,-1)),w(ke)?(f(),g(t,{key:1,class:"text-12px",size:"small",onClick:I(we,["stop","prevent"]),disabled:w(he)},{default:C((()=>[w(be)>0?(f(),x("span",L,k(w(be))+"S",1)):(f(),g(l,{key:1,name:"material-symbols:sync-outline",class:"text-12px"}))])),_:1},8,["disabled"])):y("",!0),w(ke)?(f(),g(t,{key:2,class:"text-12px",size:"small",type:"primary",onClick:I($e,["stop","prevent"]),loading:w(re)},{default:C((()=>[h(l,{name:"custom:wallet-fill",class:"text-12px mr-4px"}),B(k(e.$t("createWallet")),1)])),_:1},8,["loading"])):y("",!0),w(ke)?(f(),g(t,{key:3,class:"text-12px",size:"small",onClick:a[0]||(a[0]=I((e=>le.value=!0),["stop","prevent"]))},{default:C((()=>[h(l,{name:"mingcute:new-folder-fill",class:"text-102x mr-4px"}),B(k(e.$t("importWallet")),1)])),_:1})):y("",!0)]),h(W,{tableData:w(me),loading:w(pe),onRefresh:Be},null,8,["tableData","loading"]),h(R,{onRefresh:Be}),h(V,{tableData:w(ve),loading:w(xe)},null,8,["tableData","loading"]),h(s,{modelValue:w(ce),"onUpdate:modelValue":a[4]||(a[4]=e=>N(ce)?ce.value=e:null),width:"500",height:"630",class:D(["dialog-connect1",w(ne)]),"append-to-body":"","close-on-click-modal":!1,"show-close":!1},{header:C((()=>[b("div",O,[b("span",P,k(e.$t("mnemonic")),1),h(l,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:a[1]||(a[1]=I((e=>ce.value=!1),["stop","prevent"]))})])])),default:C((()=>{var s;return[b("div",{class:"relative min-h-160px",onClick:a[2]||(a[2]=e=>ue.value=!1)},[w(ue)?(f(),x("div",Q,[h(l,{name:"custom:show-code",class:"text-16px mr-4px color-[--main-text]"}),B(" "+k(e.$t("clickMnemonic")),1)])):y("",!0),b("div",X,[(f(!0),x(_,null,T(w(ge),((e,a)=>(f(),x("div",{class:"mnemonic-item block border border-solid border-[--dialog-divider] py-8px text-center relative",key:a},[b("span",Y,k(a+1),1),B(" "+k(e),1)])))),128))])]),b("div",Z,[S((f(),g(t,{class:"flex-1",style:{height:"48px"},onClick:a[3]||(a[3]=I((()=>{}),["stop","prevent"]))},{default:C((()=>[B(k(e.$t("copyMnemonic")),1)])),_:1})),[[n,null==(s=w(ge))?void 0:s.join(" ")]]),h(t,{class:"flex-1",style:{height:"48px"},type:"primary",onClick:I(_e,["stop","prevent"])},{default:C((()=>[B(k(e.$t("continue")),1)])),_:1})])]})),_:1},8,["modelValue","class"])])}}});export{ee as default};
